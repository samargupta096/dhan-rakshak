# Dhan-Rakshak üõ°Ô∏èüí∞

![Visitors](https://komarev.com/ghpvc/?username=Samarpitgupta&repo=dhan-rakshak&label=Visitors&color=0e75b6&style=flat)

**Your Personal Financial Guardian.**

Dhan-Rakshak is a privacy-first, offline-capable Android application designed to help you master your finances. Built with modern Android technologies, it provides a unified view of your net worth, expenses, and investments without compromising your data security.

## üì± Features

### üìä Dashboard & Insights
*   **Net Worth Tracking**: Real-time calculation of your total wealth.
*   **Activity Feed**: Recent transactions and portfolio changes.
*   **Asset Allocation**: Visual breakdown of your portfolio (Equity, Debt, Gold).

### üìà Portfolio Management
*   **Live Market Data**: Real-time prices for Stocks.
*   **Mutual Funds**: Daily NAV updates directly from AMFI.
*   **Multi-Asset Support**: Track Stocks, Mutual Funds, Gold, Crypto, EPF, and PPF.
*   **Automated Calculations**: Instant gains/loss analysis.

### üîÑ One-Click Imports & Automation
*   **üìù CAS Import**: Import your entire mutual fund history by uploading your Consolidated Account Statement (CAS) from CAMS or KFintech.
*   **üì≤ OTP-Based Fetch**: *(Experimental)* Fetch your portfolio using just your mobile number and OTP verification.
*   **üîí Privacy**: Parsing happens entirely in your phone/browser. No financial data is sent to our servers during import.

### üè• Health Locker
*   **Activity Dashboard**: Track daily steps, calories, and sleep with goal setting.
*   **Policy Manager**: Store insurance details and track premiums/renewals.
*   **Medical Log**: Record vitals and upload lab reports.
*   **Expense Analysis**: Monitor medical spending from transaction data.

### üí∞ Transactions & Budgeting
*   **Smart Categorization**: Tag income and expenses.
*   **Recurring Transactions**: Set up subscriptions and bills.
*   **Budget Tracking**: Monitor spending against monthly limits.

### ü§ñ AI Intelligence (On-Device & Private)

Dhan-Rakshak leverages **Gemini Nano**, Google's most efficient AI model for on-device tasks, to provide intelligence without compromising privacy.

![AI Privacy Architecture](docs/images/ai_privacy_flow_diagram.png)

*   **Smart SMS Parsing**:
    *   **How it works**: The app listens for SMS from banks. Instead of sending this sensitive text to a cloud server, it's sent to the device's NPU (Neural Processing Unit).
    *   **Gemini Nano**: The local AI model extracts transaction details (Amount, Merchant, Type) and converts them into structured JSON.
    *   **Privacy**: Your financial data **never leaves your phone**.
*   **Risk Analysis**: AI runs locally to analyze your asset allocation and suggests diversification strategies.
*   **Financial Advice**: Personalized tips generated by the on-device model based on your spending patterns.

### ‚òÅÔ∏è Cloud Sync (Optional)
*   **Multi-Device Support**: Sync your data across Mobile, Tablet, and Desktop.
*   **Firebase Backend**: Secure, encrypted storage using your Google/Microsoft account.
*   **Offline First**: Works perfectly without internet; syncs when you go online.

### üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Sharing
*   **Invite Family Members**: Generate unique invite codes to add family to your group.
*   **Shared Dashboard**: View combined family net worth and asset distribution.
*   **Time Together**: Schedule and track dedicated family events like "Date Night" or "Family Dinner".
*   **Privacy Controls**: Choose what to share‚Äîfull portfolio or just totals.

### üìÖ Time Management (Planner)
*   **Financial Goals**: Set and track goals like "Save for House" or "No-spend day".
*   **Smart Reminders**: Bill payment alerts, SIP due dates, and portfolio review reminders.
*   **Daily Tasks**: Integrated view of today's financial to-dos.
*   **Notes**: Attach contextual notes to assets and transactions.

## üì∏ Screenshots

| **Dashboard & Work** | **Portfolio & Insights** |
|:---:|:---:|
| ![Dashboard](docs/images/mockup_dashboard_ui.png)<br>_Main Dashboard_ | ![Portfolio](docs/images/mockup_portfolio_ui.png)<br>_Investment Portfolio_ |
| ![Work Tracker](docs/images/mockup_work_dashboard_ui.png)<br>_Job & Work Tracker_ | ![Insights](docs/images/mockup_insights_ui.png)<br>_AI Financial Insights_ |

### üõ†Ô∏è Utilities & Tools

| **Scanner & Gifts** | **Planning & Health** |
|:---:|:---:|
| ![Scanner](docs/images/mockup_scanner_ui.png)<br>_AI Receipt Scanner_ | ![Planner](docs/images/mockup_planner_ui.png)<br>_Financial Planner_ |
| ![Gift Tracker](docs/images/mockup_gift_ui.png)<br>_Gift Tracker_ | ![Health Locker](docs/images/mockup_health_ui.png)<br>_Health & Insurance_ |

### üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family & Trips

| **Family Sharing** | **Trip Planner** | **Calculators** |
|:---:|:---:|:---:|
| ![Family](docs/images/mockup_family_ui.png)<br>_Family Dashboard_ | ![Trip Planner](docs/images/mockup_trip_ui.png)<br>_Trip Manager_ | ![Calculators](docs/images/mockup_calculators_ui.png)<br>_SIP & FD Calculators_ |

## üèóÔ∏è Architecture

Dhan-Rakshak follows the **Clean Architecture** principle combined with **MVVM** (Model-View-ViewModel) to ensure scalability and testability.

```mermaid
graph TD
    UI[UI Layer (Activities/Fragments)] -->|Observes| VM[ViewModel]
    VM -->|Uses| UC[Use Cases]
    UC -->|Uses| Rep[Repository]
    Rep -->|Reads/Writes| Local[Local Data Source (Room/DataStore)]
    Rep -->|Fetches| Remote[Remote Data Source (Retrofit)]
    Local --> DB[(SQLite Database)]
    Remote --> API[External APIs (Stock/AMFI)]
```

### Backend API Integration

Dhan-Rakshak connects to various services to provide real-time data while maintaining a local-first architecture.

![Backend API Architecture](docs/images/backend_architecture_diagram.png)

### Tech Stack

*   **Language**: Java / Kotlin
*   **Architecture**: MVVM + Clean Architecture
*   **Dependency Injection**: Hilt
*   **Database**: Room (SQLite) with SQLCipher encryption
*   **Networking**: Retrofit + OkHttp
*   **Asynchronous Processing**: RxJava 3
*   **AI/ML**: Google AI Edge SDK (Gemini Nano) for on-device SMS parsing.
*   **UI**: XML Layouts / Material Design 3

## üß© Feature Implementation Details

### 1. Family Sharing Architecture
*   **Core Entity**: `FamilyMember` (Room Entity) allows tracking multiple members within a single device or syncing across devices.
*   **Data Access**: `FamilyMemberDao` handles CRUD operations and aggregates net worth using `SUM(contributionToNetWorth)`.
*   **UI Layer**:
    *   `FamilyFragment`: Manages the member list and invitation flow.
    *   `FamilyDashboardFragment`: Displays the aggregated family net worth using `FamilyDashboardViewModel`.
*   **Navigation**: Accessible via the "Quick Access" panel in `SettingsFragment`.

### 2. Time Management (Planner) Architecture
*   **Unified Planner**: `PlannerFragment` uses a `TabLayout` to switch between Goals, Reminders, and Daily Tasks.
*   **Entities**:
    *   `FinancialGoal`: Tracks target amount, current savings, and target date.
    *   `Reminder`: Stores title, description, frequency, and next trigger time.
*   **Background Processing**:
    *   `ReminderWorker`: A `PeriodicWorkRequest` running hourly to check for due reminders.
    *   **Notification System**: Triggers Android system notifications with high priority for due bills/reminders.
*   **User Input**: Custom layouts (`dialog_add_goal.xml`, `dialog_add_reminder.xml`) with Material Date/Time pickers.

### 3. Financial Calculators
*   **Utility Class**: `CalculatorUtils` provides static methods for calculating:
    *   **Fixed Deposit (FD)**: Compound interest.
    *   **Recurring Deposit (RD)**: Monthly compounding approximation.
    *   **SIP**: Future value calculation for mutual funds.
*   **UI**: `CalculatorsFragment` uses a `TabLayout` to toggle between different calculator types (FD, RD, SIP) dynamically within a single fragment.

### 4. Asset Insights & Visualization
*   **Charts**: Integrated `MPAndroidChart` library.
    *   **Pie Chart**: Visualizes asset allocation (Equity vs Debt vs Gold).
    *   **Bar Chart**: Compares **Invested vs Current Value** for each asset class to show growth.
*   **Comparison Logic**: `AiFinanceInsightsEngine` now aggregates `investedValue` alongside `currentValue` to power the comparison charts.

### 5. Smart Receipt Scanner (On-Device AI)
*   **CameraX + ML Kit**: Uses Google's on-device machine learning to scan physical receipts.
*   **Privacy-First**: No images leave the device. OCR happens locally on the NPU/CPU.
*   **Parsers**: Intelligent extraction of **Merchant**, **Date**, and **Total Amount**.

### 6. AI Expense Forecasting
*   **Predictive Analytics**: Uses local transaction history to forecast next month's expenses.
*   **Logic**: Implemented in `AiFinanceInsightsEngine` using Weighted Moving Average algorithms.
*   **Visualization**: Forecasts are integrated into the AI Insights view.

## üõ†Ô∏è Setup & Build

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/yourusername/dhan-rakshak.git
    ```

2.  **Open in Android Studio**:
    Open the project in the latest version of Android Studio (Hedgehog or newer recommended).

3.  **Environment Setup**:
    Create a `local.properties` file in the project root if it doesn't exist, and add the following (optional if you want to override defaults):
    ```properties
    STOCK_API_URL="https://indian-stock-market-api.vercel.app/"
    AMFI_API_URL="https://www.amfiindia.com/"
    ```

4.  **Build & Run**:
    Select the `app` configuration and press **Run** (Shift+F10) to deploy to your emulator or physical device.

## ü§ù Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

